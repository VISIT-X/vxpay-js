!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("VX",[],t):"object"==typeof exports?exports.VX=t():e.VX=t()}(window,function(){return function(e){var t=window.webpackHotUpdateVX;window.webpackHotUpdateVX=function(e,n){!function(e,t){if(!O[e]||!m[e])return;for(var n in m[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(y[n]=t[n]);0==--_&&0===b&&S()}(e,n),t&&t(e,n)};var n,o=!0,r="ccaf98463336dee13b63",i=1e4,a={},u=[],c=[];function s(e){var t=P[e];if(!t)return A;var o=function(o){return t.hot.active?(P[o]?-1===P[o].parents.indexOf(e)&&P[o].parents.push(e):(u=[e],n=o),-1===t.children.indexOf(o)&&t.children.push(o)):(console.warn("[HMR] unexpected require("+o+") from disposed module "+e),u=[]),A(o)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return A[e]},set:function(t){A[e]=t}}};for(var i in A)Object.prototype.hasOwnProperty.call(A,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(o,i,r(i));return o.e=function(e){return"ready"===l&&p("prepare"),b++,A.e(e).then(t,function(e){throw t(),e});function t(){b--,"prepare"===l&&(g[e]||E(e),0===b&&0===_&&S())}},o.t=function(e,t){return 1&t&&(e=o(e)),A.t(e,-2&t)},o}var f=[],l="idle";function p(e){l=e;for(var t=0;t<f.length;t++)f[t].call(null,e)}var h,y,d,_=0,b=0,g={},m={},O={};function v(e){return+e+""===e?+e:e}function w(e){if("idle"!==l)throw new Error("check() is only allowed in idle status");return o=e,p("check"),function(e){return e=e||1e4,new Promise(function(t,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var o=new XMLHttpRequest,i=A.p+""+r+".hot-update.json";o.open("GET",i,!0),o.timeout=e,o.send(null)}catch(e){return n(e)}o.onreadystatechange=function(){if(4===o.readyState)if(0===o.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===o.status)t();else if(200!==o.status&&304!==o.status)n(new Error("Manifest request to "+i+" failed."));else{try{var e=JSON.parse(o.responseText)}catch(e){return void n(e)}t(e)}}})}(i).then(function(e){if(!e)return p("idle"),null;m={},g={},O=e.c,d=e.h,p("prepare");var t=new Promise(function(e,t){h={resolve:e,reject:t}});y={};return E(1),"prepare"===l&&0===b&&0===_&&S(),t})}function E(e){O[e]?(m[e]=!0,_++,function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=A.p+""+e+"."+r+".hot-update.js",t.appendChild(n)}(e)):g[e]=!0}function S(){p("ready");var e=h;if(h=null,e)if(o)Promise.resolve().then(function(){return T(o)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in y)Object.prototype.hasOwnProperty.call(y,n)&&t.push(v(n));e.resolve(t)}}function T(t){if("ready"!==l)throw new Error("apply() is only allowed in ready status");var n,o,i,c,s;function f(e){for(var t=[e],n={},o=t.slice().map(function(e){return{chain:[e],id:e}});o.length>0;){var r=o.pop(),i=r.id,a=r.chain;if((c=P[i])&&!c.hot._selfAccepted){if(c.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:i};if(c.hot._main)return{type:"unaccepted",chain:a,moduleId:i};for(var u=0;u<c.parents.length;u++){var s=c.parents[u],f=P[s];if(f){if(f.hot._declinedDependencies[i])return{type:"declined",chain:a.concat([s]),moduleId:i,parentId:s};-1===t.indexOf(s)&&(f.hot._acceptedDependencies[i]?(n[s]||(n[s]=[]),h(n[s],[i])):(delete n[s],t.push(s),o.push({chain:a.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];-1===e.indexOf(o)&&e.push(o)}}t=t||{};var _={},b=[],g={},m=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var w in y)if(Object.prototype.hasOwnProperty.call(y,w)){var E;s=v(w);var S=!1,T=!1,k=!1,I="";switch((E=y[w]?f(s):{type:"disposed",moduleId:w}).chain&&(I="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(S=new Error("Aborted because of self decline: "+E.moduleId+I));break;case"declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(S=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+I));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(E),t.ignoreUnaccepted||(S=new Error("Aborted because "+s+" is not accepted"+I));break;case"accepted":t.onAccepted&&t.onAccepted(E),T=!0;break;case"disposed":t.onDisposed&&t.onDisposed(E),k=!0;break;default:throw new Error("Unexception type "+E.type)}if(S)return p("abort"),Promise.reject(S);if(T)for(s in g[s]=y[s],h(b,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,s)&&(_[s]||(_[s]=[]),h(_[s],E.outdatedDependencies[s]));k&&(h(b,[E.moduleId]),g[s]=m)}var N,C=[];for(o=0;o<b.length;o++)s=b[o],P[s]&&P[s].hot._selfAccepted&&C.push({module:s,errorHandler:P[s].hot._selfAccepted});p("dispose"),Object.keys(O).forEach(function(e){!1===O[e]&&function(e){delete installedChunks[e]}(e)});for(var L,R,j=b.slice();j.length>0;)if(s=j.pop(),c=P[s]){var F={},D=c.hot._disposeHandlers;for(i=0;i<D.length;i++)(n=D[i])(F);for(a[s]=F,c.hot.active=!1,delete P[s],delete _[s],i=0;i<c.children.length;i++){var V=P[c.children[i]];V&&((N=V.parents.indexOf(s))>=0&&V.parents.splice(N,1))}}for(s in _)if(Object.prototype.hasOwnProperty.call(_,s)&&(c=P[s]))for(R=_[s],i=0;i<R.length;i++)L=R[i],(N=c.children.indexOf(L))>=0&&c.children.splice(N,1);for(s in p("apply"),r=d,g)Object.prototype.hasOwnProperty.call(g,s)&&(e[s]=g[s]);var M=null;for(s in _)if(Object.prototype.hasOwnProperty.call(_,s)&&(c=P[s])){R=_[s];var U=[];for(o=0;o<R.length;o++)if(L=R[o],n=c.hot._acceptedDependencies[L]){if(-1!==U.indexOf(n))continue;U.push(n)}for(o=0;o<U.length;o++){n=U[o];try{n(R)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:s,dependencyId:R[o],error:e}),t.ignoreErrored||M||(M=e)}}}for(o=0;o<C.length;o++){var G=C[o];s=G.module,u=[s];try{A(s)}catch(e){if("function"==typeof G.errorHandler)try{G.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:s,error:n,originalError:e}),t.ignoreErrored||M||(M=n),M||(M=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:s,error:e}),t.ignoreErrored||M||(M=e)}}return M?(p("fail"),Promise.reject(M)):(p("idle"),new Promise(function(e){e(b)}))}var P={};function A(t){if(P[t])return P[t].exports;var o=P[t]={i:t,l:!1,exports:{},hot:function(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var o=0;o<e.length;o++)t._acceptedDependencies[e[o]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:w,apply:T,status:function(e){if(!e)return l;f.push(e)},addStatusHandler:function(e){f.push(e)},removeStatusHandler:function(e){var t=f.indexOf(e);t>=0&&f.splice(t,1)},data:a[e]};return n=void 0,t}(t),parents:(c=u,u=[],c),children:[]};return e[t].call(o.exports,o,o.exports,s(t)),o.l=!0,o.exports}return A.m=e,A.c=P,A.d=function(e,t,n){A.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},A.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},A.t=function(e,t){if(1&t&&(e=A(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(A.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)A.d(n,o,function(t){return e[t]}.bind(null,o));return n},A.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return A.d(t,"a",t),t},A.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},A.p="",A.h=function(){return r},s(0)(A.s=0)}({"./node_modules/is-mobile/index.js":function(e,t,n){"use strict";e.exports=i,e.exports.isMobile=i;var o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(e,t){return t||null===e||"object"!=typeof e||(t=e),e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"==typeof e&&(t||(t={}),t.tablet?r.test(e):o.test(e))}},"./src/main.js":function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,null,[{key:"getAvailable",value:function(){return[e.LANDING_PAGE,e.CULT_BABES,e.TV_CHAT,e.SLP,e.VXONE_LP,e.VXONE]}},{key:"getDefault",value:function(){return e.VXONE}}]),e}();r.LANDING_PAGE="lp",r.CULT_BABES="cultbabes",r.TV_CHAT="tvchat",r.SLP="slp",r.VXONE_LP="vxonelp",r.VXONE="vxone";var i=r;function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,null,[{key:"getDefault",value:function(){return e.DE}},{key:"getAvailable",value:function(){return[e.DE,e.EN,e.NL]}}]),e}();u.DE="DE",u.EN="EN",u.NL="NL";var c=u;function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,null,[{key:"getAllowed",value:function(){return[e.AVS,e.LIMIT,e.LOGIN,e.MONEY_CHARGE,e.OP_COMPENSATION,e.PASSWORD_RESET,e.PASSWORD_LOST,e.PROMOCODE,e.SCRATCH_CARD,e.TRIAL_VIP_ABO,e.VIP_ABO,e.VXTV_ABO,e.SETTINGS,e.CHANGE_CARD,e.CHANGE_LS,e.ONE_CLICK,e.AUTO_RECHARGE]}},{key:"getDefault",value:function(){return e.MONEY_CHARGE}}]),e}();f.AVS="avs",f.LIMIT="limit",f.LOGIN="login",f.MONEY_CHARGE="moneycharge",f.OP_COMPENSATION="opcompensation",f.AUTO_RECHARGE="autorecharge",f.PASSWORD_RESET="pwdreset",f.PASSWORD_LOST="pwdlost",f.PROMOCODE="promocode",f.SCRATCH_CARD="scratchcard",f.TRIAL_VIP_ABO="trialvipabo",f.VIP_ABO="vipabo",f.VXTV_ABO="vxtvabo",f.SETTINGS="vxsettings",f.CHANGE_CARD="changecc",f.CHANGE_LS="changels",f.ONE_CLICK="oneclick";var l=f;function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._login=e.YES,this._showHeader=e.YES,this._showTeaser=e.YES,this._showFooter=e.YES,this._support=e.YES,this._showOAuth=e.YES,this._showNL=e.YES,this._neutralHeader=e.NO,this._teaserBonus=e.NO,this._showThank=e.NO,this._showLogo=e.NO,this._showTeaserBar=e.NO,this._parentInFrame=e.NO}return function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(e,[{key:"getOptions",value:function(){return{login:this.login,showHeader:this.showHeader,showTeaser:this.showTeaser,showFooter:this.showFooter,neutralHeader:this.neutralHeader,teaserBonus:this.teaserBonus,support:this.support,showOAuth:this.showOAuth,showNL:this.showNL,showThank:this.showThank,showLogo:this.showLogo,showTeaserBar:this.showTeaserBar,parentInFrame:this.parentInFrame}}},{key:"parentInFrame",get:function(){return this._parentInFrame},set:function(t){e._throwOnInvalid(t),this._parentInFrame=t}},{key:"login",get:function(){return this._login},set:function(t){e._throwOnInvalid(t),this._login=t}},{key:"showHeader",get:function(){return this._showHeader},set:function(t){e._throwOnInvalid(t),this._showHeader=t}},{key:"showTeaser",get:function(){return this._showTeaser},set:function(t){e._throwOnInvalid(t),this._showTeaser=t}},{key:"showFooter",get:function(){return this._showFooter},set:function(t){e._throwOnInvalid(t),this._showFooter=t}},{key:"neutralHeader",get:function(){return this._neutralHeader},set:function(t){e._throwOnInvalid(t),this._neutralHeader=t}},{key:"teaserBonus",get:function(){return this._teaserBonus},set:function(t){e._throwOnInvalid(t),this._teaserBonus=t}},{key:"support",get:function(){return this._support},set:function(t){e._throwOnInvalid(t),this._support=t}},{key:"showOAuth",get:function(){return this._showOAuth},set:function(t){e._throwOnInvalid(t),this._showOAuth=t}},{key:"showNL",get:function(){return this._showNL},set:function(t){e._throwOnInvalid(t),this._showNL=t}},{key:"showThank",get:function(){return this._showThank},set:function(t){e._throwOnInvalid(t),this._showThank=t}},{key:"showLogo",get:function(){return this._showLogo},set:function(t){e._throwOnInvalid(t),this._showLogo=t}},{key:"showTeaserBar",get:function(){return this._showTeaserBar},set:function(t){e._throwOnInvalid(t),this._showTeaserBar=t}}],[{key:"_throwOnInvalid",value:function(e){if(!g.isModalConfigValueAllowed(e))throw new TypeError("Value not allowed. Try one of: VXPayModalConfig.YES, VXPayModalConfig.NO")}},{key:"getAllowed",value:function(){return[e.YES,e.NO]}}]),e}();h.YES=1,h.NO=0;var y=h;function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var _=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._urlImpl=void 0===t?window.URL:t}return function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(e,[{key:"generate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=new this._urlImpl(e);if(o.hash="",t)for(var r in t)void 0!==t[r]&&o.searchParams.append(r,t[r]);if(n)for(var i in n){void 0!==n["_"===i.charAt(1)?i.substr(1):i]&&o.searchParams.append("mc["+i+"]",n[i])}return o.toString()}},{key:"getQueryParam",value:function(e,t){try{return new this._urlImpl(e).searchParams[t]}catch(e){return""}}},{key:"isValid",value:function(e){try{return new this._urlImpl(e),!0}catch(e){return!1}}}]),e}();function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&b(e.prototype,t),n&&b(e,n)}(e,null,[{key:"isUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new _(t).isValid(e)}},{key:"isLanguageSupported",value:function(e){return-1!==c.getAvailable().indexOf(e)}},{key:"isEnvironmentSupported",value:function(e){return-1!==i.getAvailable().indexOf(e)}},{key:"isFlowAllowed",value:function(e){return-1!==l.getAllowed().indexOf(e)}},{key:"isModalConfigValueAllowed",value:function(e){return-1!==y.getAllowed().indexOf(e)}}]),e}();function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&m(e.prototype,t),n&&m(e,n)}(e,null,[{key:"addEvent",value:function(t,n,o){n.addEventListener?n.addEventListener(t,o,!1):n.attachEvent?n.attachEvent(e.IE_PREFIX+t,o):n[t]=o}},{key:"removeEvent",value:function(t,n,o){n.removeEventListener?n.removeEventListener(t,o,!1):n.detachEvent?n.detachEvent(e.IE_PREFIX+t,o):n[t]=null}}]),e}();O.IE_PREFIX="on";var v=O;function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var E=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._window=t,this._jQuery=n,this._fx=o}return function(e,t,n){t&&w(e.prototype,t),n&&w(e,n)}(e,[{key:"_hasJQuery",value:function(){return void 0!==this._jQuery&&void 0!==this._jQuery.Animation}},{key:"_hasMooTools",value:function(){return void 0!==this._fx&&void 0!==this._fx.Scroll}},{key:"scrollTo",value:function(t){try{if(this._hasJQuery()){var n=e.OPTIONS_JQUERY;return n.scrollTop=t,this._jQuery("html, body").animate(n,e.ANIMATION_DURATION)}return this._hasMooTools()?new this._fx.Scroll(this._window,e.OPTIONS_MTOOLS).start(0,t):this._window.scrollTo(0,t)}catch(e){}}},{key:"window",get:function(){return this._window}},{key:"jQuery",get:function(){return this._jQuery}},{key:"fx",get:function(){return this._fx}}],[{key:"getClientHeight",value:function(e){return e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight}},{key:"isStyleAttributeSuppored",value:function(e,t,n){var o=!1;try{e.style[t]=n,o=e.style[t]===n}catch(e){}return o}}]),e}();E.TAG_IFRAME="iframe",E.OPTIONS_JQUERY={scrollTop:0},E.OPTIONS_MTOOLS={duration:E.ANIMATION_DURATION},E.ANIMATION_DURATION=500;var S=E;function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var N=function(e){function t(e,n,o){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?I(e):t}(this,A(t).call(this)),"function"!=typeof e.createElement)throw new TypeError("An iFrame can only be build on a valid Document object!");if(!g.isUrl(n,e.defaultView.URL))throw new TypeError("Please provide a valid URL! "+n);if(!o||0===o.length)throw new TypeError("Please provide a valid frame ID!");if(r._loaded=!1,r._frame=e.createElement(S.TAG_IFRAME),r._frame.src=n,r._frame.id=o,r._frame.onload=r._markLoaded.bind(I(I(r))),null!==i)for(var a in i)r._frame.style.setProperty(a,i[a]);return r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,v),function(e,t,n){t&&P(e.prototype,t),n&&P(e,n)}(t,[{key:"triggerLoad",value:function(){throw new Error("Method triggerLoad should be implemented in child class!")}},{key:"_markLoaded",value:function(){this._loaded=!0}},{key:"maximize",value:function(){return this._frame.style.width=t.MAX_WIDTH,this._frame.style.height=t.MAX_HEIGHT,this._frame.style.left=t.MAX_LEFT,this._frame.style.top=t.MAX_TOP,this._frame.style.marginLeft=t.MAX_LEFT_MARGIN,this}},{key:"postMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ORIGIN_ALL;return this._frame.contentWindow.postMessage(e.toString(),n),this}},{key:"setMessageHandler",value:function(e){v.addEvent(t.EVENT_MESSAGE,this._frame.contentWindow,e)}},{key:"removeMessageHandler",value:function(e){v.removeEvent(t.EVENT_MESSAGE,this._frame.contentWindow,e)}},{key:"show",value:function(){this._frame.style.display=t.DISPLAY_BLOCK}},{key:"hide",value:function(){this._frame.style.display=t.DISPLAY_NONE}},{key:"loaded",get:function(){return this._loaded}},{key:"frame",get:function(){return this._frame}},{key:"url",set:function(e){this._frame.src=e},get:function(){return this._frame.src}}]),t}();N.EVENT_MESSAGE="message",N.EVENT_LOAD="load",N.EVENT_UNLOAD="beforeunload",N.POSITION_ABSOLUTE="absolute",N.POSITION_FIXED="fixed",N.DISPLAY_BLOCK="block",N.DISPLAY_NONE="none",N.MAX_HEIGHT="100vh",N.MAX_WIDTH="100%",N.MAX_TOP="0",N.MAX_LEFT="0",N.MAX_LEFT_MARGIN="0",N.ORIGIN_VX="https://www.visit-x.net",N.ORIGIN_ALL="*";var C=N,L=n("./node_modules/is-mobile/index.js"),R=n.n(L);function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userAgent=t}return function(e,t,n){t&&j(e.prototype,t),n&&j(e,n)}(e,[{key:"isMobile",value:function(){return R()(this._userAgent)}},{key:"userAgent",get:function(){return this._userAgent},set:function(e){this._userAgent=e}}]),e}();function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var V=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._env=i.getDefault(),this._logging=!1,this._flow=l.getDefault(),this._language=c.getDefault(),this._urls={abg:e.ABG_DEFAULT.replace("{language}",this._language),privacy:e.PRIVACY_DEFAULT.replace("{language}",this._language),ruri:"",suri:"",purl:""},this._pfm="",this._enableTab=new F(t.navigator.userAgent||"").isMobile(),this._host="",this._token="",this._promoCode="",this._wmId="",this._wmSubRef="",this._wmToken="",this._adtv="",this._subRef="",this._apiVersion=3,this._modalConfig=void 0===n?new y:n,this._window=t,this._helper=new _(t.URL)}return function(e,t,n){t&&D(e.prototype,t),n&&D(e,n)}(e,[{key:"getPaymentFrameUrl",value:function(){return this._helper.generate(C.ORIGIN_VX+"/VXPAY-V"+this._apiVersion+"/",this.getOptions(),this._modalConfig.getOptions())}},{key:"getOptions",value:function(){return{agbUrl:this.abgUrl,privacyUrl:this.privacyUrl,environment:this._env,flow:this._flow,lang:this._language,pfm:this._pfm,w:this._wmId,ws:this._wmSubRef,wt:this._wmToken,adtv:this._adtv,sub:this._subRef,enableTab:this._enableTab?1:0,option:"",pc:this._promoCode,tt:this._token,ruri:this._urls.ruri,host:this._host}}},{key:"getAdditionalOptions",value:function(){var e={ref:this._wmId,ruri:this._urls.ruri,surl:this._urls.suri,aurl:this.abgUrl,prurl:this.privacyUrl,purl:this._urls.purl};return Object.assign({},e,this.modalConfig.getOptions())}},{key:"setTokenFromMessage",value:function(e){this._token=e.token}},{key:"merge",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;Object.keys(t.getOptions()).forEach(function(n){var o=e.hasOwnProperty(n)&&void 0!==e[n];"lang"===n&&e.hasOwnProperty("language")?t[n]=e.language:o&&(t[n]=e[n])})}},{key:"updateFlow",value:function(e){this._flow=e.newFlow}},{key:"ruri",get:function(){return this._urls.ruri},set:function(e){this._urls.ruri=e}},{key:"suri",get:function(){return this._urls.suri}},{key:"purl",get:function(){return this._urls.purl}},{key:"window",get:function(){return this._window}},{key:"abgUrl",get:function(){return this._urls.abg},set:function(e){if(!g.isUrl(e))throw new Error("Invalid URL provided: "+e);this._urls.abg=e}},{key:"privacyUrl",get:function(){return this._urls.privacy},set:function(e){if(!g.isUrl(e))throw new Error("Invalid URL provided: "+e);this._urls.privacy=e}},{key:"env",get:function(){return this._env},set:function(e){if(!g.isEnvironmentSupported(e))throw new TypeError("Environment "+e+" is not supported. Please select one of "+i.getAvailable());this._env=e}},{key:"logging",get:function(){return this._logging},set:function(e){this._logging=e}},{key:"language",get:function(){return this._language.toUpperCase()},set:function(e){if(!g.isLanguageSupported(e)){var t="Unsupported language: "+e.toString()+". Allowed: "+c.getAvailable().join(", ");throw new TypeError(t)}this._language=e}},{key:"flow",get:function(){return this._flow},set:function(e){if(!g.isFlowAllowed(e)){var t="Flow not allowed: "+e.toString()+". Select one of: "+l.getAllowed().join(", ");throw new TypeError(t)}this._flow=e}},{key:"host",get:function(){return this._host},set:function(e){this._host=e}},{key:"token",get:function(){return this._token},set:function(e){this._token=e}},{key:"promoCode",get:function(){return this._promoCode},set:function(e){this._promoCode=e}},{key:"wmId",get:function(){return this._wmId},set:function(e){this._wmId=e}},{key:"wmSubRef",get:function(){return this._wmSubRef},set:function(e){this._wmSubRef=e}},{key:"wmToken",get:function(){return this._wmToken},set:function(e){this._wmToken=e}},{key:"adtv",get:function(){return this._adtv},set:function(e){this._adtv=e}},{key:"subRef",get:function(){return this._subRef},set:function(e){this._subRef=e}},{key:"apiVersion",get:function(){return this._apiVersion},set:function(e){this._apiVersion=parseInt(e,10)}},{key:"modalConfig",get:function(){return this._modalConfig},set:function(e){if(!(e instanceof y))throw new TypeError("Modal config value should be instance of VXPayModalConfig!");this._modalConfig=e}},{key:"pfm",get:function(){return this._pfm},set:function(e){this._pfm=e}},{key:"enableTab",get:function(){return this._enableTab},set:function(e){this._enableTab=e}}]),e}();V.ABG_DEFAULT="https://www.visit-x.net/CAMS/{language}/Info/Zentrum.html?submod=AGB&track=Account",V.PRIVACY_DEFAULT="https://www.visit-x.net/CAMS/{language}/Info/Zentrum.html?submod=Datenschutz&track=Index";var M=V;function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var G=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=t||!1,this._container=[],this._window=n}return function(e,t,n){t&&U(e.prototype,t),n&&U(e,n)}(e,[{key:"log",value:function(){if(this.enabled)return void 0!==this._window?this._window.console.log.apply(this,arguments):void this._container.push({time:new Date,message:JSON.stringify(arguments)})}},{key:"container",get:function(){return this._container}}]),e}();G.LOG_INCOMING="<-- []",G.LOG_OUTGOING="--\x3e []";var Y=G;function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t}return function(e,t,n){t&&x(e.prototype,t),n&&x(e,n)}(e,[{key:"toString",value:function(){return JSON.stringify(this)}}],[{key:"getValidTypes",value:function(){return[e.TYPE_INIT_SESSION,e.TYPE_UPDATE_PARAMS,e.TYPE_IS_VISIBLE,e.TYPE_ADDITIONAL_INFO,e.TYPE_CHANGE_ROUTE,e.TYPE_HOOK,e.TYPE_SCROLL_TO,e.TYPE_SUCCESS,e.TYPE_IFRAME_CLOSE,e.TYPE_IFRAME_READY,e.TYPE_VIEW_READY,e.TYPE_TRANSFER_TOKEN,e.TYPE_CONTENT_LOADED,e.TYPE_ACTION_GET_ACTIVE_ABOS,e.TYPE_ACTION_LOGOUT,e.TYPE_ACTION_GET_AVS_STATUS,e.TYPE_ACTION_GET_BALANCE,e.TYPE_ACTION_IS_LOGGED_IN,e.TYPE_HAS_LOGIN_COOKIE,e.TYPE_BALANCE,e.TYPE_AVS_STATUS,e.TYPE_IS_LOGGED_IN]}}]),e}();H.TYPE_HOOK="modalbox-hook",H.TYPE_SCROLL_TO="modalbox-scrollto",H.TYPE_SUCCESS="modalbox-success",H.TYPE_IFRAME_CLOSE="modalbox-iframe-close",H.TYPE_IFRAME_READY="modalbox-iframe-ready",H.TYPE_VIEW_READY="modalbox-view-ready",H.TYPE_TRANSFER_TOKEN="modalbox-transfer-token",H.TYPE_CONTENT_LOADED="modalbox-content-loaded",H.TYPE_INIT_SESSION="modalbox-init-session",H.TYPE_UPDATE_PARAMS="modalbox-update-params",H.TYPE_IS_VISIBLE="modalbox-is-visible",H.TYPE_ADDITIONAL_INFO="modalbox-additional-info",H.TYPE_CHANGE_ROUTE="modalbox-change-route",H.TYPE_HAS_LOGIN_COOKIE="modalbox-response-hasLoginCookie",H.TYPE_IS_LOGGED_IN="modalbox-response-isLoggedIn",H.TYPE_AVS_STATUS="modalbox-response-getavsstatus",H.TYPE_BALANCE="modalbox-response-getbalance",H.TYPE_ACTIVE_ABOS="modalbox-response-getactiveabos",H.TYPE_LOGGED_OUT="modalbox-response-logout",H.TYPE_ACTION_GET_ACTIVE_ABOS="modalbox-action-getactiveabos",H.TYPE_ACTION_LOGOUT="modalbox-action-logout",H.TYPE_ACTION_GET_AVS_STATUS="modalbox-action-getavsstatus",H.TYPE_ACTION_IS_LOGGED_IN="modalbox-action-isLoggedIn",H.TYPE_ACTION_GET_BALANCE="modalbox-action-getbalance",H.TRANSFER_TOKEN_PREFIX="transfer_token:";var B=H;function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=K(this,W(t).call(this,B.TYPE_HAS_LOGIN_COOKIE))).hasCookie=n,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,B),t}();function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),q(this,Z(t).call(this,B.TYPE_CONTENT_LOADED))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,B),t}();function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.HOOK_UNKNOWN;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ne(this,oe(t).call(this,B.TYPE_HOOK))).hook=n,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,B),t}();ie.HOOK_UNKNOWN="dummy-unknown",ie.HOOK_FLOW_CHANGED="flowChanged",ie.HOOK_LOGIN="login";var ae=ie;function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ce(this,se(t).call(this,ae.HOOK_FLOW_CHANGED))).oldFlow=n,e.newFlow=o,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,ae),t}();function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),he(this,ye(t).call(this,ae.HOOK_LOGIN))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,ae),t}();function be(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&be(e.prototype,t),n&&be(e,n)}(e,null,[{key:"fromData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===e||!e.hasOwnProperty("hook"))throw new TypeError("Invalid message format - no hook field");switch(e.hook){case ae.HOOK_FLOW_CHANGED:return new le(e.prevFlow,e.flow);case ae.HOOK_LOGIN:return new _e;default:return new ae}}}]),e}();function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oe(this,ve(t).call(this,B.TYPE_IFRAME_READY))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,B),t}();function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ke=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Te(this,Pe(t).call(this,B.TYPE_VIEW_READY))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,B),t}();function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ne(this,Ce(t).call(this,B.TYPE_TRANSFER_TOKEN))).token=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,B),t}();function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Me=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Fe(this,De(t).call(this,B.TYPE_IFRAME_CLOSE))).data=n,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(t,B),t}();function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var He=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ge(this,Ye(t).call(this,B.TYPE_IS_VISIBLE))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,B),t}();function Be(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Xe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._balance=NaN,this._fsk18=!1,this._nickname="",this._userId=NaN}return function(e,t,n){t&&Be(e.prototype,t),n&&Be(e,n)}(e,[{key:"balance",get:function(){return this._balance},set:function(e){this._balance=e}},{key:"fsk18",get:function(){return this._fsk18},set:function(e){this._fsk18=e}},{key:"nickname",get:function(){return this._nickname},set:function(e){this._nickname=e}},{key:"userId",get:function(){return this._userId},set:function(e){this._userId=e}}]),e}();function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Je=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.USER_DATA_STRUCT;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=We(this,Qe(t).call(this,B.TYPE_SUCCESS))).user=new Xe,e.user.balance=n.availableMoney||0,e.user.nickname=n.screenname||"",e.user.fsk18=n.fsk18||!1,e.user.userId=n.userId||NaN,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,B),t}();Je.USER_DATA_STRUCT={success:!0,userFromLogin:!1,userFromSignup:!1,flow:"login",hostId:null,screenname:"user123",userId:9876789087,isLoggedIn:!0,transferToken:"TT_7a9523c9-5555-4c48-5555-91cc2465f484",availableMoney:12.34,fsk18:!1,uhash:null};var qe=Je;function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=$e(this,et(t).call(this,B.TYPE_IS_LOGGED_IN))).loggedIn=n,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(t,B),t}();function ot(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fsk18=!1}return function(e,t,n){t&&ot(e.prototype,t),n&&ot(e,n)}(e,[{key:"fsk18",get:function(){return this._fsk18},set:function(e){this._fsk18=e}}],[{key:"fromData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e;return n.fsk18=t.fsk18||!1,n}}]),e}();function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var st=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rt;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=at(this,ut(t).call(this,B.TYPE_AVS_STATUS))).status=n,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,B),t}();function ft(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var lt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&ft(e.prototype,t),n&&ft(e,n)}(e,null,[{key:"getDefault",value:function(){return e.EUR}},{key:"getAllowed",value:function(){return[e.EUR,e.USD,e.CHF]}}]),e}();lt.EUR="EUR",lt.USD="USD",lt.CHF="CHF";var pt=lt;function ht(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var yt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt.EUR;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._amount=t,this._currency=n}return function(e,t,n){t&&ht(e.prototype,t),n&&ht(e,n)}(e,[{key:"toString",value:function(){return this._amount.toFixed(2)+" "+this._currency}},{key:"amount",get:function(){return this._amount}},{key:"currency",get:function(){return this._currency}}]),e}();function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bt(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ot=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=bt(this,gt(t).call(this,B.TYPE_BALANCE))).balance=new yt,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(t,B),function(e,t,n){t&&_t(e.prototype,t),n&&_t(e,n)}(t,null,[{key:"fromData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.SAMPLE_DATA,n=new t;return n.balance=new yt(e.balance,e.currency),n}}]),t}();Ot.SAMPLE_DATA={balance:0,currency:pt.EUR};var vt=Ot;function wt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Et=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._amount=0,this._endDate=0,this._isActive=!1,this._isFreeAbo=!1,this._isPaidAbo=!0,this._isTrialAbo=!0,this._name=""}return function(e,t,n){t&&wt(e.prototype,t),n&&wt(e,n)}(e,[{key:"amount",get:function(){return this._amount},set:function(e){this._amount=e}},{key:"endDate",get:function(){return this._endDate},set:function(e){this._endDate=e}},{key:"isActive",get:function(){return this._isActive},set:function(e){this._isActive=e}},{key:"isFreeAbo",get:function(){return this._isFreeAbo},set:function(e){this._isFreeAbo=e,this._isPaidAbo=!e}},{key:"isPaidAbo",get:function(){return this._isPaidAbo},set:function(e){this._isPaidAbo=e,this._isFreeAbo=!e}},{key:"isTrialAbo",get:function(){return this._isTrialAbo},set:function(e){this._isTrialAbo=e}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}}]),e}();function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Pt(e,t){return!t||"object"!==St(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var It=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Pt(this,At(t).call(this,B.TYPE_ACTIVE_ABOS))).abos=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(t,B),function(e,t,n){t&&Tt(e.prototype,t),n&&Tt(e,n)}(t,[{key:"add",value:function(e){this.abos.push(e)}}],[{key:"fromData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.SAMPLE_DATA,n=new t;return Object.keys(e).forEach(function(t){var o=new Et;o.amount=e[t].amount,o.endDate=e[t].endDate,o.isActive=e[t].isActive,o.isFreeAbo=e[t].isFreeAbo,o.isPaidAbo=e[t].isPaidAbo,o.isTrialAbo=e[t].isTrialAbo,o.name=e[t].name,n.add(o)}),n}}]),t}();It.SAMPLE_DATA={name:{amount:0,endDate:{},isActive:!0,isFreeAbo:!1,isPaidAbo:!0,isTrialAbo:!0,name:"Abo"}};var Nt=It;function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ft=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lt(this,Rt(t).call(this,B.TYPE_LOGGED_OUT))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(t,B),t}();function Dt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Vt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&Dt(e.prototype,t),n&&Dt(e,n)}(e,null,[{key:"fromJson",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"{}",t=JSON.parse(e);if(!t.hasOwnProperty("type"))throw new TypeError("Invalid message format - no type field");switch(t.type){case B.TYPE_HAS_LOGIN_COOKIE:return new z(!!t.data);case B.TYPE_AVS_STATUS:return new st(rt.fromData(t.data));case B.TYPE_BALANCE:return vt.fromData(t.data);case B.TYPE_LOGGED_OUT:return new Ft;case B.TYPE_ACTIVE_ABOS:return Nt.fromData(t.data);case B.TYPE_CONTENT_LOADED:return new ee;case B.TYPE_IFRAME_READY:return new Ee;case B.TYPE_HOOK:return ge.fromData(t.data);case B.TYPE_VIEW_READY:return new ke;case B.TYPE_IFRAME_CLOSE:return new Me(t.data);case B.TYPE_IS_VISIBLE:return new He;case B.TYPE_SUCCESS:return new qe(t.data);case B.TYPE_IS_LOGGED_IN:return new nt(t.data)}if(0===t.type.indexOf(B.TRANSFER_TOKEN_PREFIX)){var n=t.type.substr(B.TRANSFER_TOKEN_PREFIX.length);return new Re(n)}var o=new B(t.type);return o.raw=e,o}}]),e}();function Mt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ut=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._onAny=[],this._onBeforeSend=[],this._onLoad=[]}return function(e,t,n){t&&Mt(e.prototype,t),n&&Mt(e,n)}(e,[{key:"onLoad",value:function(e){return this._onLoad.push(e),this}},{key:"onAny",value:function(e){return this._onAny.push(e),this}},{key:"onBeforeSend",value:function(e){return this._onBeforeSend.push(e),this}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n="_"+e;if(!this.hasOwnProperty(n))throw new Error("Hook "+e+" not available!");return 0===this[n].length||(this[n].map(function(e){e.apply(e,t)}),!0)}}]),e}();Ut.ON_LOAD="onLoad",Ut.ON_ANY="onAny",Ut.ON_BEFORE_SEND="onBeforeSend";var Gt=Ut;function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){return!t||"object"!==Yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xt(this,Ht(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(t,Gt),t}();function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Qt(e,t){return!t||"object"!==Kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e,t,n){return(zt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jt(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zt=function(e){function t(e,n){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.NAME,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.STYLE_DEFAULT;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Qt(this,Jt(t).call(this,e,n,r,i)))._cookieMsg=null,o._frame.name="vxpay-helper",o._hooks=new Xt,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}(t,C),function(e,t,n){t&&Wt(e.prototype,t),n&&Wt(e,n)}(t,[{key:"_cookieMessageHandler",value:function(e,t,n){n.origin&&-1===C.ORIGIN_VX.indexOf(n.origin)&&t("Event origin does not match: "+n.origin);try{this._cookieMsg=Vt.fromJson(n.data)}catch(e){this._cookieMsg=new z}this._hooks.trigger(Gt.ON_ANY,[this._cookieMsg]),e(this._cookieMsg)}},{key:"getLoginCookie",value:function(){var e=this;return new Promise(function(t,n){null!==e._cookieMsg&&t(e._cookieMsg),v.addEvent(C.EVENT_MESSAGE,e._frame.ownerDocument.defaultView,e._cookieMessageHandler.bind(e,t,n))})}},{key:"_markLoaded",value:function(){zt(Jt(t.prototype),"_markLoaded",this).call(this),this._hooks.trigger(Xt.ON_LOAD)}},{key:"postMessage",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";this._hooks.trigger(Xt.ON_BEFORE_SEND,[e]),zt(Jt(t.prototype),"postMessage",this).call(this,e,n)}},{key:"triggerLoad",value:function(){this._loaded||this._frame.ownerDocument.getElementsByTagName("body").item(0).appendChild(this._frame)}},{key:"hooks",get:function(){return this._hooks}}]),t}();Zt.STYLE_DEFAULT={display:"none"},Zt.NAME="vx-helper-frame-payment";var $t=Zt;function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=tn(this,nn(t).call(this,B.TYPE_INIT_SESSION))).token=n,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(t,B),t}();function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,t){return!t||"object"!==an(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=un(this,cn(t).call(this,B.TYPE_UPDATE_PARAMS))).options=n,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(t,B),t}();function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(e,t){return!t||"object"!==ln(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hn(e){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t){return(yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=pn(this,hn(t).call(this,B.TYPE_CHANGE_ROUTE)),n.length>0&&(e.route=n),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(t,B),t}();function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function gn(e,t){return!t||"object"!==_n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function On(e,t){return(On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vn=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=gn(this,mn(t).call(this)))._onViewReady=[],e._onContentLoaded=[],e._onClose=[],e._onSuccess=[],e._onIframeReady=[],e._onLogin=[],e._onLogout=[],e._onFlowChange=[],e._onIsLoggedIn=[],e._onTransferToken=[],e._onAVSStatus=[],e._onBalance=[],e._onActiveAbos=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(t,Gt),function(e,t,n){t&&bn(e.prototype,t),n&&bn(e,n)}(t,[{key:"onLogout",value:function(e){return this._onLogout.push(e),this}},{key:"hasOnLogout",value:function(e){return-1!==this._onLogout.indexOf(e)}},{key:"onActiveAbos",value:function(e){return this._onActiveAbos.push(e),this}},{key:"hasOnActiveAbos",value:function(e){return-1!==this._onActiveAbos.indexOf(e)}},{key:"onBalance",value:function(e){return this._onBalance.push(e),this}},{key:"hasOnBalance",value:function(e){return-1!==this._onBalance.indexOf(e)}},{key:"onAVSStatus",value:function(e){this._onAVSStatus.push(e)}},{key:"hasOnAVSStatus",value:function(e){return-1!==this._onAVSStatus.indexOf(e)}},{key:"onIsLoggedIn",value:function(e){return this._onIsLoggedIn.push(e),this}},{key:"hasOnIsLoggedIn",value:function(e){return-1!==this._onIsLoggedIn.indexOf(e)}},{key:"onTransferToken",value:function(e){return this._onTransferToken.push(e),this}},{key:"hasOnTransferToken",value:function(e){return-1!==this._onTransferToken.indexOf(e)}},{key:"onFlowChange",value:function(e){return this._onFlowChange.push(e),this}},{key:"onLogin",value:function(e){return this._onLogin.push(e),this}},{key:"onIframeReady",value:function(e){return this._onIframeReady.push(e),this}},{key:"onClose",value:function(e){return this._onClose.push(e),this}},{key:"onSuccess",value:function(e){return this._onSuccess.push(e),this}},{key:"onViewReady",value:function(e){return this._onViewReady.push(e),this}},{key:"onContentLoaded",value:function(e){return this._onContentLoaded.push(e),this}}]),t}();vn.ON_VIEW_READY="onViewReady",vn.ON_IFRAME_READY="onIframeReady",vn.ON_CONTENT_LOADED="onContentLoaded",vn.ON_CLOSE="onClose",vn.ON_SUCCESS="onSuccess",vn.ON_LOGIN="onLogin",vn.ON_LOGOUT="onLogout",vn.ON_FLOW_CHANGE="onFlowChange",vn.ON_IS_LOGGED_IN="onIsLoggedIn",vn.ON_TRANSFER_TOKEN="onTransferToken",vn.ON_AVS_STATUS="onAVSStatus",vn.ON_BALANCE="onBalance",vn.ON_ACTIVE_ABOS="onActiveAbos";var wn=vn,En=function(e,t){if(t.origin&&-1===C.ORIGIN_VX.indexOf(t.origin))return!1;var n=Vt.fromJson(t.data);switch(e.trigger(wn.ON_ANY,[n]),n.type){case B.TYPE_TRANSFER_TOKEN:return e.trigger(wn.ON_TRANSFER_TOKEN,[n]);case B.TYPE_AVS_STATUS:return e.trigger(wn.ON_AVS_STATUS,[n]);case B.TYPE_BALANCE:return e.trigger(wn.ON_BALANCE,[n]);case B.TYPE_ACTIVE_ABOS:return e.trigger(wn.ON_ACTIVE_ABOS,[n]);case B.TYPE_IFRAME_READY:return e.trigger(wn.ON_IFRAME_READY,[n]);case B.TYPE_CONTENT_LOADED:return e.trigger(wn.ON_CONTENT_LOADED,[n]);case B.TYPE_VIEW_READY:return e.trigger(wn.ON_VIEW_READY,[n]);case B.TYPE_IFRAME_CLOSE:return e.trigger(wn.ON_CLOSE,[n]);case B.TYPE_SUCCESS:return e.trigger(wn.ON_SUCCESS,[n]);case B.TYPE_IS_LOGGED_IN:return e.trigger(wn.ON_IS_LOGGED_IN,[n]);case B.TYPE_LOGGED_OUT:return e.trigger(wn.ON_LOGOUT,[n]);case B.TYPE_HOOK:switch(n.hook){case ae.HOOK_LOGIN:return e.trigger(wn.ON_LOGIN,[n]);case ae.HOOK_FLOW_CHANGED:return e.trigger(wn.ON_FLOW_CHANGE,[n])}}};function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e,t){return!t||"object"!==Sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Tn(this,Pn(t).call(this,B.TYPE_ADDITIONAL_INFO))).options=n,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(t,B),t}();function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Cn(e,t){return!t||"object"!==In(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ln(e,t,n){return(Ln="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rn(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jn(e,t){return(jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fn=function(e){function t(e,n){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.NAME,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=Object.assign({},t.getDefaultStyles(e),i),(o=Cn(this,Rn(t).call(this,e,n,r,i)))._frame.allowTransparency=!0,o._frame.name="vxpay",o._hooks=new wn,o._sessionInitialized=!1,o.startListening(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(t,C),function(e,t,n){t&&Nn(e.prototype,t),n&&Nn(e,n)}(t,[{key:"triggerLoad",value:function(){this._loaded||this._frame.ownerDocument.getElementsByTagName("body").item(0).appendChild(this._frame)}},{key:"startListening",value:function(){var e=this;v.addEvent(C.EVENT_MESSAGE,this._frame.ownerDocument.defaultView,function(t){return En(e._hooks,t)}),v.addEvent(C.EVENT_UNLOAD,this._frame.ownerDocument.defaultView,this.stopListening.bind(this))}},{key:"stopListening",value:function(){var e=this;v.removeEvent(C.EVENT_MESSAGE,this._frame.ownerDocument.defaultView,function(t){return En(e._hooks,t)}),v.removeEvent(C.EVENT_UNLOAD,this._frame.ownerDocument.defaultView,this.stopListening.bind(this))}},{key:"_markLoaded",value:function(){return Ln(Rn(t.prototype),"_markLoaded",this).call(this),this._hooks.trigger(wn.ON_LOAD)}},{key:"postMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";return this._hooks.trigger(wn.ON_BEFORE_SEND,[e]),null!==this._frame.contentWindow&&this._frame.contentWindow.postMessage(e.toString(),t),this}},{key:"initSession",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return this._sessionInitialized?this:(e=e||null,this.postMessage(new rn(e)),this._sessionInitialized=!0,this)}},{key:"sendOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.postMessage(new fn(e)),this}},{key:"sendAdditionalOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.postMessage(new kn(e)),this}},{key:"sendUpdateParams",value:function(e){return this.postMessage(new fn(e)),this}},{key:"changeRoute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.postMessage(new dn(e))}},{key:"setVisible",value:function(){this.postMessage(new He)}},{key:"hooks",get:function(){return this._hooks}}],[{key:"getDefaultStyles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=void 0!==e?e.defaultView.navigator.userAgent:"",n=new F(t),o=void 0!==e?e.getElementsByTagName("body").item(0):null,r={border:"none",width:"100%",height:"100%",top:"50%",left:"50%",marginLeft:"-325px",zIndex:10001,display:"none",transform:"translate(-50%, -50%)"};return r.position=n.isMobile()?C.POSITION_ABSOLUTE:C.POSITION_FIXED,void 0!==e&&S.isStyleAttributeSuppored(o,"maxHeight","100vh")?r.maxHeight="100vh":n.isMobile()&&(r.maxHeight=S.getClientHeight(e.defaultView)+"px"),r}}]),t}();Fn.NAME="vx-payment-frame-payment";var Dn=Fn;function Vn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Mn=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._document=t,this._hooks=new wn,this._loaded=!1,this._name=n,this._config=o,this._route=e.DEFAULT_ROUTE,this._promise=null,this._window=null}return function(e,t,n){t&&Vn(e.prototype,t),n&&Vn(e,n)}(e,[{key:"triggerLoad",value:function(){this.getNewTab().then(this.startListening.bind(this))}},{key:"getNewTab",value:function(){var e=this,t=this._config.getPaymentFrameUrl()+"#"+this._route;return null==this._promise&&(this._promise=new Promise(function(n){if(null!==e._window&&!e._window.closed)return n(e._window);e._window=e._document.defaultView.open(t,e._name),n(e._window)})),this._promise}},{key:"startListening",value:function(e){var t=this;return v.addEvent(C.EVENT_MESSAGE,this._document.defaultView,function(e){return En(t._hooks,e)}),v.addEvent(C.EVENT_UNLOAD,this._document.defaultView,this.stopListening.bind(this)),e}},{key:"stopListening",value:function(){var e=this;v.removeEvent(C.EVENT_MESSAGE,this._document.defaultView,function(t){return En(e._hooks,t)}),v.removeEvent(C.EVENT_UNLOAD,this._document.defaultView,this.stopListening.bind(this))}},{key:"sendOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._config.merge(e),this}},{key:"sendAdditionalOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._config.merge(e),this}},{key:"sendUpdateParams",value:function(e){return this.postMessage(new fn(e)),this}},{key:"postMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";return this._hooks.trigger(wn.ON_BEFORE_SEND,[e]),null!==this._window&&this._window.postMessage(e.toString(),t),this}},{key:"initSession",value:function(){return this}},{key:"changeRoute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_ROUTE;return this._route=t,this}},{key:"setVisible",value:function(){this.triggerLoad()}},{key:"show",value:function(){return this.triggerLoad(),this}},{key:"hide",value:function(){return this._window&&!this._window.closed&&this._window.close(),this}},{key:"document",get:function(){return this._document}},{key:"name",get:function(){return this._name}},{key:"config",get:function(){return this._config}},{key:"loaded",get:function(){return this._loaded}},{key:"route",get:function(){return this._route}},{key:"hooks",get:function(){return this._hooks}}]),e}();Mn.NAME="vx-payment-tab-payment",Mn.DEFAULT_ROUTE="/";var Un=Mn,Gn=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.logger.log("VXPayInitPaymentMiddleware()"),e.state.isContentLoaded?(e.logger.log("VXPayInitPaymentMiddleware() - already loaded, resolve ..."),t(e)):e.state.isFrameInProgress&&!n?(e.logger.log("VXPayInitPaymentMiddleware() - already in progress, resolve ..."),t(e)):(e.state.isFrameInProgress=!0,e.hasOwnProperty("_paymentFrame")||(e._paymentFrame=e.config.enableTab?new Un(e.window.document,Un.NAME,e.config):new Dn(e.window.document,e.config.getPaymentFrameUrl(),Dn.NAME),e.config.logging&&e._paymentFrame.hooks.onAny(function(t){return e.logger.log(Y.LOG_INCOMING,t)}).onBeforeSend(function(t){return e.logger.log(Y.LOG_OUTGOING,t)})),void(e._paymentFrame.loaded||(e._paymentFrame.hooks.onIframeReady(e.state.markFrameReady.bind(e.state)).onContentLoaded(e.state.markContentLoaded.bind(e.state)).onTransferToken(e.state.markHasToken.bind(e.state)).onTransferToken(e.config.setTokenFromMessage.bind(e.config)).onFlowChange(e.config.updateFlow.bind(e.config)).onViewReady(e._paymentFrame.setVisible.bind(e._paymentFrame)).onViewReady(e._paymentFrame.show.bind(e._paymentFrame)).onSuccess(e._paymentFrame.hide.bind(e._paymentFrame)).onClose(e._paymentFrame.hide.bind(e._paymentFrame)).onContentLoaded(function(){return t(e)}),!e.config.enableTab&&n?(e.logger.log("VXPayInitPaymentMiddleware() - not loaded yet, trigger load"),e._paymentFrame.url=e.config.getPaymentFrameUrl(),e._paymentFrame.triggerLoad()):t(e))))},Yn=function(e,t){return void 0!==e.helperFrame?t(e):(e.helperFrame=new $t(e.window.document,C.ORIGIN_VX+"/VXPAY-V"+e.apiVersion+"/helper"),e.config.logging&&e.helperFrame.hooks.onAny(function(t){return e.logger.log(Y.LOG_INCOMING,t)}).onBeforeSend(function(t){return e.logger.log(Y.LOG_OUTGOING,t)}),e.helperFrame.triggerLoad(),t(e))};function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(e,t){return!t||"object"!==xn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xn(e,t){return(Xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Hn(this,Bn(t).call(this,B.TYPE_ACTION_IS_LOGGED_IN))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xn(e,t)}(t,B),t}(),Wn=function(e,t,n){try{e.hooks.then(function(e){e.hasOnIsLoggedIn(t)||e.onIsLoggedIn(t)}),e.paymentFrame.then(function(e){return e.postMessage(new Kn)})}catch(e){n(e)}return e};function Qn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var zn=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._vxpay=t,this._resolve=n,this._reject=o,this._handler=this.trigger.bind(this)}return function(e,t,n){t&&Qn(e.prototype,t),n&&Qn(e,n)}(e,[{key:"run",value:function(){var e=this;try{return this._vxpay.state.hasToken?(this._handler(),this._vxpay):(this._vxpay.hooks.then(function(t){t.hasOnTransferToken(e._handler)||t.onTransferToken(e._handler)}),this._vxpay)}catch(e){this._reject(e)}}},{key:"trigger",value:function(){Wn(this._vxpay,this._resolve,this._reject)}}]),e}(),Jn=function(e,t,n){try{return e.hooks.then(function(e){e.hasOnAVSStatus(t)||e.onAVSStatus(t)}),e}catch(e){n(e)}};function qn(e){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e,t){return!t||"object"!==qn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eo(e,t){return(eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var to=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zn(this,$n(t).call(this,B.TYPE_ACTION_GET_AVS_STATUS))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eo(e,t)}(t,B),t}(),no=function(e){var t=function(e){return e.postMessage(new to)};return e.state.hasToken?e.paymentFrame.then(t):e.hooks.then(function(n){n.onTransferToken(function(){return e.paymentFrame.then(t)})}),e},oo=function(e,t,n){try{return e.hooks.then(function(e){e.hasOnBalance(t)||e.onBalance(t)}),e}catch(e){n(e)}};function ro(e){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function io(e,t){return!t||"object"!==ro(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uo(e,t){return(uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var co=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),io(this,ao(t).call(this,B.TYPE_ACTION_GET_BALANCE))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}(t,B),t}(),so=function(e){var t=function(e){return e.postMessage(new co)};return e.state.hasToken?e.paymentFrame.then(t):e.hooks.then(function(n){n.onTransferToken(function(){return e.paymentFrame.then(t)})}),e},fo=function(e,t,n){try{e.hooks.then(function(e){e.hasOnActiveAbos(t)||e.onActiveAbos(t)})}catch(e){n(e)}return e};function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function po(e,t){return!t||"object"!==lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ho(e){return(ho=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yo(e,t){return(yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),po(this,ho(t).call(this,B.TYPE_ACTION_GET_ACTIVE_ABOS))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yo(e,t)}(t,B),t}(),bo=function(e){var t=function(e){e.postMessage(new _o)};return e.state.hasToken?e.paymentFrame.then(t):e.hooks.then(function(n){n.onTransferToken(function(){return e.paymentFrame.then(t)})}),e},go=function(e,t,n){try{return e.hooks.then(function(e){e.hasOnLogout(t)||e.onLogout(t)}),e}catch(e){n(e)}};function mo(e){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oo(e,t){return!t||"object"!==mo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vo(e){return(vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Eo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oo(this,vo(t).call(this,B.TYPE_ACTION_LOGOUT))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wo(e,t)}(t,B),t}(),So=function(e){var t=function(e){return e.postMessage(new Eo)};return e.state.hasToken?e.paymentFrame.then(t):e.hooks.then(function(n){n.onTransferToken(function(){return e.paymentFrame.then(t)})}),e};function To(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Po=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isFrameReady=!1,this._token=void 0,this._isContentLoaded=!1,this._isSessionInitialized=!1,this._isFrameInProgress=!1}return function(e,t,n){t&&To(e.prototype,t),n&&To(e,n)}(e,[{key:"markFrameReady",value:function(){this._isFrameReady=!0,this._isFrameInProgress=!1}},{key:"markContentLoaded",value:function(){this._isContentLoaded=!0}},{key:"markHasToken",value:function(e){this._token=e}},{key:"markSessionInitialized",value:function(){this._isSessionInitialized=!0}},{key:"isFrameInProgress",get:function(){return this._isFrameInProgress},set:function(e){this._isFrameInProgress=e}},{key:"isFrameReady",get:function(){return this._isFrameReady},set:function(e){this._isFrameReady=e}},{key:"hasToken",get:function(){return void 0!==this._token}},{key:"isContentLoaded",get:function(){return this._isContentLoaded},set:function(e){this._isContentLoaded=e}},{key:"isSessionInitialized",get:function(){return this._isSessionInitialized},set:function(e){this._isSessionInitialized=e}},{key:"transferToken",get:function(){return this._token}}]),e}(),Ao=function(e){return e.logger.log("VXPayWhenTokenTransferred()"),new Promise(function(t,n){try{e.state.hasToken||e.config.enableTab?t(e):e.hooks.then(function(n){return n.onTransferToken(function(){return t(e)})})}catch(e){n(e)}})};function ko(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Io=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&ko(e.prototype,t),n&&ko(e,n)}(e,null,[{key:"getAllowed",value:function(){return[e.LOGIN,e.SIGN_UP,e.PAYMENT,e.ABO,e.AVS,e.PROMOCODE,e.OP_COMPENSATION,e.PASSWORD,e.PASSWORD_RESET,e.AUTO_RECHARGE,e.ONE_CLICK,e.SETTINGS,e.VOICE_CALL,e.LIMIT]}}]),e}();Io.LOGIN="/login",Io.SIGN_UP="/signup",Io.PAYMENT="/payment",Io.ABO="/abo",Io.AVS="/avs",Io.PROMOCODE="/promocode",Io.OP_COMPENSATION="/opcompensation",Io.PASSWORD="/password",Io.PASSWORD_RESET="/passwordreset",Io.AUTO_RECHARGE="/autorecharge",Io.ONE_CLICK="/comfort",Io.SETTINGS="/user/settings",Io.VOICE_CALL="/voicecall",Io.LIMIT="/limit";var No=Io,Co=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.logger.log("VXPayOpenLoginCommand()"),e.paymentFrame.then(function(n){n.sendOptions({flow:l.LOGIN}),t&&n.sendUpdateParams(t),n.sendAdditionalOptions(e.config.getAdditionalOptions()).changeRoute(No.LOGIN).initSession()}),e},Lo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.logger.log("VXPayOpenSignUpCommand()"),e.paymentFrame.then(function(n){return n.sendOptions({flow:l.LOGIN}),t&&n.sendUpdateParams(t),n.sendAdditionalOptions(e.config.getAdditionalOptions()).changeRoute(No.SIGN_UP).initSession()}),e};var Ro=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};Ro.VOICE_CALL="Voice",Ro.CREDIT_CARD="CC",Ro.LASTSCHRIFT="LS";var jo=Ro;function Fo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Do=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&Fo(e.prototype,t),n&&Fo(e,n)}(e,null,[{key:"run",value:function(t){return t.logger.log("VXPayOpenVoiceCallCommand::run()"),t.paymentFrame.then(function(n){return n.sendOptions(e.PARAMS).sendAdditionalOptions(t.config.getAdditionalOptions()).changeRoute(No.VOICE_CALL).initSession()}),t}}]),e}();Do.PARAMS={flow:l.MONEY_CHARGE,paytype:jo.VOICE_CALL};var Vo=Do;function Mo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Uo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&Mo(e.prototype,t),n&&Mo(e,n)}(e,null,[{key:"run",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.logger.log("VXPayOpenPaymentCommand()"),t.paymentFrame.then(function(o){o.sendOptions(e.PARAMS),n&&o.sendUpdateParams(n),o.sendAdditionalOptions(t.config.getAdditionalOptions()).changeRoute(No.PAYMENT).initSession()}),t}}]),e}();Uo.PARAMS={flow:l.MONEY_CHARGE,paytype:""};var Go=Uo;function Yo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var xo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&Yo(e.prototype,t),n&&Yo(e,n)}(e,null,[{key:"run",value:function(t){return t.logger.log("VXPayOpenSettingsCommand()"),t.paymentFrame.then(function(n){return n.sendOptions(e.PARAMS).sendAdditionalOptions(t.config.getAdditionalOptions()).changeRoute(No.SETTINGS).initSession()}),t}}]),e}();xo.PARAMS={flow:l.SETTINGS,paytype:""};var Ho=xo,Bo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.logger.log("VXPayOpenAboCommand()"),e.paymentFrame.then(function(n){n.sendOptions({flow:l.VIP_ABO}),t&&n.sendUpdateParams(t),n.sendAdditionalOptions(e.config.getAdditionalOptions()).changeRoute(No.ABO).initSession()}),e};function Xo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ko=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&Xo(e.prototype,t),n&&Xo(e,n)}(e,null,[{key:"run",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.logger.log("VXPayResetPasswordCommand()"),t.paymentFrame.then(function(o){o.initSession().sendOptions(e.getParams(t.config)),n&&o.sendUpdateParams(n),o.sendAdditionalOptions(t.config.getAdditionalOptions()).changeRoute(No.PASSWORD_RESET)}),t}},{key:"getParams",value:function(e){var t=new _(e.window.URL);return{flow:l.PASSWORD_RESET,pwdresetUserId:t.getQueryParam("u",e.window.location.href),pwdresetUserName:t.getQueryParam("tpLoginPwdLost",e.window.location.href),pwdresetKey:t.getQueryParam("key",e.window.location.href)}}}]),e}();function Wo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Qo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&Wo(e.prototype,t),n&&Wo(e,n)}(e,null,[{key:"run",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.logger.log("VXPayLostPasswordCommand()"),t.paymentFrame.then(function(o){o.initSession().sendOptions(e.getParams(t.config)),n&&o.sendUpdateParams(n),o.sendAdditionalOptions(t.config.getAdditionalOptions()).changeRoute(No.PASSWORD)}),t}},{key:"getParams",value:function(e){var t=new _(e.window.URL);return{flow:l.PASSWORD_LOST,pwdresetUserId:t.getQueryParam("u",e.window.location.href),pwdresetUserName:t.getQueryParam("tpLoginPwdLost",e.window.location.href),pwdresetEmail:t.getQueryParam("tpEmailPwdLost",e.window.location.href)}}}]),e}();function zo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Jo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&zo(e.prototype,t),n&&zo(e,n)}(e,null,[{key:"run",value:function(t){return t.logger.log("VXPayOpenLimitedPaymentCommand()"),t.paymentFrame.then(function(n){return n.sendOptions(e.PARAMS).sendAdditionalOptions(t.config.getAdditionalOptions()).changeRoute(No.LIMIT).initSession()}),t}}]),e}();Jo.PARAMS={flow:l.LIMIT,paytype:""};var qo=Jo,Zo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.logger.log("VXPayOpenVipAboTrialCommand()"),e.paymentFrame.then(function(n){n.initSession().sendOptions({flow:l.TRIAL_VIP_ABO}),t&&n.sendUpdateParams(t),n.sendAdditionalOptions(e.config.getAdditionalOptions()).changeRoute(No.ABO)}),e},$o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.logger.log("VXPayOpenPaymentCommand()"),e.paymentFrame.then(function(n){n.initSession().sendOptions({flow:l.VXTV_ABO}),t&&n.sendUpdateParams(t),n.sendAdditionalOptions(e.config.getAdditionalOptions()).changeRoute(No.ABO)}),e},er=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.logger.log("VXPayOpenAVSCommand()"),e.paymentFrame.then(function(n){n.initSession().sendOptions({flow:l.AVS}),t&&n.sendUpdateParams(t),n.sendAdditionalOptions(e.config.getAdditionalOptions()).changeRoute(No.AVS)}),e},tr=function(e,t){return e.logger.log("VXPayOpenPromoCodeCommand()"),e.paymentFrame.then(function(n){n.initSession().sendOptions({flow:l.PROMOCODE}),t&&n.sendUpdateParams(t),n.sendAdditionalOptions(e.config.getAdditionalOptions()).changeRoute(No.PROMOCODE)}),e};function nr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var or=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&nr(e.prototype,t),n&&nr(e,n)}(e,null,[{key:"run",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.logger.log("VXPayOpenOneClickCommand()"),t.paymentFrame.then(function(o){o.initSession().sendOptions(e.PARAMS),n&&o.sendUpdateParams(n),o.sendAdditionalOptions(t.config.getAdditionalOptions()).changeRoute(No.ONE_CLICK)}),t}}]),e}();or.PARAMS={flow:l.ONE_CLICK,paytype:"",oneClickData:{data:null}};var rr=or;function ir(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ar=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&ir(e.prototype,t),n&&ir(e,n)}(e,null,[{key:"run",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.logger.log("VXPayOpenAutoRechargeCommand()"),t.paymentFrame.then(function(o){o.initSession().sendOptions(e.PARAMS),n&&o.sendUpdateParams(n),o.sendAdditionalOptions(t.config.getAdditionalOptions()).changeRoute(No.AUTO_RECHARGE)}),t}}]),e}();ar.PARAMS={flow:l.AUTO_RECHARGE,autoRechargeData:{data:null}};var ur=ar,cr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.logger.log("VXPayOpenOneClickCommand()"),e.paymentFrame.then(function(n){n.initSession().sendOptions({flow:l.OP_COMPENSATION}),t&&n.sendUpdateParams(t),n.sendAdditionalOptions(e.config.getAdditionalOptions()).changeRoute(No.OP_COMPENSATION)}),e},sr=function(e){return e.logger.log("VXPayTriggerShowForTab()"),e.config.enableTab&&e.paymentFrame.then(function(e){return e.show()}),e};function fr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var lr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.logger=new Y(this.config.logging,this.config.window),this._state=new Po,this.logger.log("VXPay::constructor - "+JSON.stringify(this.config.getOptions()))}return function(e,t,n){t&&fr(e.prototype,t),n&&fr(e,n)}(e,[{key:"_initHelperFrame",value:function(){var e=this;return new Promise(function(t){return Yn(e,t)})}},{key:"_initPaymentFrame",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.logger.log("VXPay::_initPaymentFrame"),new Promise(function(n){return Gn(e,n,t)})}},{key:"openLogin",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.logger.log("VXPay::openLogin"),new Promise(function(n,o){return e._initPaymentFrame().then(Ao).then(function(e){return Co(e,t)}).then(sr).then(n).catch(o)})}},{key:"openSignUp",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){return e._initPaymentFrame().then(Ao).then(function(e){return Lo(e,t)}).then(sr).then(n).catch(o)})}},{key:"openVoiceCall",value:function(){var e=this;return new Promise(function(t,n){e._initPaymentFrame().then(Ao).then(Vo.run).then(sr).then(t).catch(n)})}},{key:"openSignUpOrLogin",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._initHelperFrame().then(function(e){return e.helperFrame.getLoginCookie()}).then(function(n){return n.hasCookie?e.openLogin(t):e.openSignUp(t)})}},{key:"openPayment",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return Go.run(e,t)}).then(sr).then(n).catch(o)})}},{key:"openAbo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return Bo(e,t)}).then(sr).then(n).catch(o)})}},{key:"openSettings",value:function(){var e=this;return new Promise(function(t,n){e._initPaymentFrame().then(Ao).then(Ho.run).then(sr).then(t).catch(n)})}},{key:"resetPassword",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return Ko.run(e,t)}).then(sr).then(n).catch(o)})}},{key:"lostPassword",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return Qo.run(e,t)}).then(sr).then(n).catch(o)})}},{key:"limitPayment",value:function(){var e=this;return new Promise(function(t,n){e._initPaymentFrame().then(Ao).then(qo.run).then(sr).then(t).catch(n)})}},{key:"vipAboTrial",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return Zo(e,t)}).then(sr).then(n).catch(o)})}},{key:"premiumAbo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return $o(e,t)}).then(sr).then(n).catch(o)})}},{key:"openAVS",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return er(e,t)}).then(sr).then(n).catch(o)})}},{key:"openPromoCode",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return tr(e,t)}).then(sr).then(n).catch(o)})}},{key:"openScratchCard",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return tr(e,t)}).then(sr).then(n).catch(o)})}},{key:"openOneClick",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return rr.run(e,t)}).then(sr).then(n).catch(o)})}},{key:"openAutoReCharge",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return ur.run(e,t)}).then(sr).then(n).catch(o)})}},{key:"openBalance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,o){e._initPaymentFrame().then(Ao).then(function(e){return cr(e,t)}).then(sr).then(n).catch(o)})}},{key:"isLoggedIn",value:function(){var e=this;return new Promise(function(t,n){e._initPaymentFrame().then(function(e){return new zn(e,t,n).run()}).catch(n)})}},{key:"getAVSStatus",value:function(){var e=this;return new Promise(function(t,n){return e._initPaymentFrame().then(function(e){return Jn(e,t,n)}).then(no).catch(n)})}},{key:"getBalance",value:function(){var e=this;return new Promise(function(t,n){e._initPaymentFrame().then(function(e){return oo(e,t,n)}).then(so).catch(n)})}},{key:"getActiveAbos",value:function(){var e=this;return new Promise(function(t,n){e._initPaymentFrame().then(function(e){return fo(e,t,n)}).then(bo).catch(n)})}},{key:"logout",value:function(){var e=this;return new Promise(function(t,n){e._initPaymentFrame().then(function(e){return go(e,t,n)}).then(So).catch(n)})}},{key:"state",get:function(){return this._state}},{key:"config",get:function(){return this._config},set:function(e){if(!(e instanceof M))throw new TypeError("Please provide an instance of VXPayConfig!");void 0!==this._logger&&this._logger.log("VXPay::config -> ",e),this._config=e}},{key:"logger",get:function(){return this._logger},set:function(e){if(!(e instanceof Y))throw new TypeError("Please provide an instance of VXPayLogger!");this._logger=e}},{key:"apiVersion",get:function(){return this.config.apiVersion},set:function(e){this.config.apiVersion=e}},{key:"hooks",get:function(){var e=this;return this.logger.log("VXPay::hooks"),new Promise(function(t,n){if(e.state.isContentLoaded)return e.logger.log("VXPay::hooks -> already loaded, resolve ..."),t(e._paymentFrame.hooks);e._initPaymentFrame(!1).then(function(e){return t(e._paymentFrame.hooks)}).catch(n)})}},{key:"paymentFrame",get:function(){var e=this;return new Promise(function(t,n){e._initPaymentFrame().then(function(e){return t(e._paymentFrame)}).catch(n)})},set:function(e){if(!(e instanceof Dn||e instanceof Un))throw new TypeError("Payment frame should be an instance of VXPayPaymentFrame or VXPayPaymentTab");this._paymentFrame=e}},{key:"helperFrame",get:function(){return this._helperFrame},set:function(e){if(!(e instanceof $t))throw new TypeError("Helper frame should be an instance of VXPayHelperFrame");this._helperFrame=e}},{key:"window",get:function(){return this.config.window}}]),e}();var pr=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};pr.SESSION_ACKNOWLEDGE="ackSession",pr.SESSION_EXPIRED="sessionExpired",pr.MESSAGE="message",pr.MESSAGE_PRICE="messagePrice",pr.CHANNELS="channels",pr.INCOMING_MESSAGE="incomingMessage",pr.ALL_CHANNELS_SEEN="allChannelsSeen",pr.CAN_ONECLICK_RESULT="canOneClickResult",pr.CHARGE_AUTORECHARGE_RESULT="chargeAutoRechargeResult",pr.CHARGE_ONECLICK_RESULT="chargeOneClickResult",pr.FAVORITE_ACTOR_PINNED="FavoriteActorPinned",pr.FAVORITE_ACTOR_UNPINNED="FavoriteActorUnpinned",pr.FAVORITE_PICTURE_PINNED="FavoritePicturePinned",pr.FAVORITE_PICTURE_UNPINNED="FavoritePictureUnpinned",pr.FAVORITE_ALBUM_PINNED="FavoriteAlbumPinned",pr.FAVORITE_ALBUM_UNPINNED="FavoriteAlbumUnpinned",pr.FAVORITE_SEDCARDS_ALBUM_PINNED="FavoriteSedcardsAlbumPinned",pr.FAVORITE_SEDCARDS_ALBUM_UNPINNED="FavoriteSedcardsAlbumUnpinned",pr.FAVORITE_ACTORS="FavoriteActors",pr.GUEST_BALANCE="guestBalance",pr.NAVBAR_NOTIFICATIONS="navbarNotifications",pr.ACTOR_ONLINE="actorOnline",pr.ACTOR_OFFLINE="actorOffline",pr.AVS_REVOKED="avsRevoked",pr.AVS_SET="avsSet",pr.GUEST_LOCKED="guestLocked",pr.CHANNEL_ARCHIVED="channelArchived",pr.SEND_SIGNUP_EMAIL_RESULT="sendSignupEmailResult",pr.VIP_ABO_UPDATE="vipAboUpdate",pr.VXTV_ABO_UPDATE="vxtvAboUpdate",pr.VOICECALL_START="voicecallStart",pr.VOICECALL_STOP="voicecallStop",pr.WELCOME_BONUS_REDEEMED="welcomeBonusRedeemed",pr.FREE_SHOW_START="freeShowStart",pr.FREE_SHOW_STOP="freeShowStop",pr.PONG="pong";var hr=pr;n.d(t,"VXPay",function(){return lr}),n.d(t,"VXPayConfig",function(){return M}),n.d(t,"VXPayEnvironment",function(){return i}),n.d(t,"VXPayLanguage",function(){return c}),n.d(t,"VXPayNotifications",function(){return hr}),n.d(t,"VXPayModalConfig",function(){return y}),n.d(t,"VXPayPaymentHooksConfig",function(){return wn}),n.d(t,"VXPayFlow",function(){return l}),n.d(t,"VXPayCurrency",function(){return pt})},0:function(e,t,n){e.exports=n("./src/main.js")}})});