<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width">
	<title>VXPay - sample integration</title>
	<link rel="stylesheet" href="mdc/mdc.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body class="mdc-typography">
<div class="mdc-layout-grid">
	<div class="mdc-layout-grid__inner">
		<div class="mdc-layout-grid__cell--span-12">
			<h4 class="mdc-typography--title">Open</h4>
			<div class="mdc-layout-grid__inner">
				<div class="mdc-form-field mdc-layout-grid__cell--span-12">
					<div class="mdc-checkbox">
						<input type="checkbox" name="use-tab" id="use-tab" class="mdc-checkbox__native-control" onchange="onToggleTab(document.getElementById('use-tab').checked)" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="use-tab">Open in a new tab</label>
				</div>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-login">Login</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-signup">Register</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-login-or-signup">Login or Register</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="reset-password">Reset password</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-2-phone  mdc-layout-grid__cell--span-4-tablet"
				   href="#"
				   id="lost-password">Lost password</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-voice-call">Voice call</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-2-phone mdc-layout-grid__cell--span-4-tablet"
				   href="#"
				   id="open-payment">General Payment</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-abo">VIP abo</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-limited">Limited payment</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-abo-trial">VIP trial abo</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-abo-premium">Premium abo</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#" title="Age verification"
				   id="open-avs">AVS</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-settings">Extended settings</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-promo-code">Promo code</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-scratch-card">Scratch card</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-one-click">One click</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-auto-recharge">Auto recharge</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-balance">Open balance</a>
			</div>
		</div>
		<div class="mdc-layout-grid__cell--span-12">
			<h4 class="mdc-typography--title">Actions</h4>
			<div class="mdc-layout-grid__inner">
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone" href="javascript:isLoggedInAction()">Is logged in?</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone" href="javascript:logout()">Logout</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone" href="javascript:getAvsStatus()">AVS status</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone" href="javascript:getBalance()">Get balance</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone" href="javascript:getAbos()">Get active abos</a>
			</div>
		</div>
	</div>
</div>

<!-- Load the library -->
<script type="text/javascript">
	var vxpay, config;

	/**
	 * Re-init as tab
	 * @param {Boolean} enable
	 */
	onToggleTab = function(enable) {
		config           = new VX.VXPayConfig(window);
		config.enableTab = enable;
		config.logging   = true;
		config.language  = VX.VXPayLanguage.EN;
		vxpay            = new VX.VXPay(config);
	};

	__init = function() {
		config          = new VX.VXPayConfig(window);
		config.logging  = true;
		config.language = VX.VXPayLanguage.EN;
		vxpay           = new VX.VXPay(config);

		console.log(vxpay.config.enableTab);
	};

	document.addEventListener('DOMContentLoaded', function() {
		/** Open login click handler */
		document.getElementById('open-login').onclick = function(e) {
			e.preventDefault();
			vxpay.openLogin().then(function() {
				console.log('Login opened')
			});
		};

		/** Open registration */
		document.getElementById('open-signup').onclick = function(e) {
			e.preventDefault();
			vxpay.openSignUp().then(function() {
				console.log('SignUp opened')
			});
		};

		/** Open registration or login */
		document.getElementById('open-login-or-signup').onclick = function(e) {
			e.preventDefault();
			vxpay.openSignUpOrLogin().then(function() {
				console.log('Opened')
			});
		};

		/** Password reset */
		document.getElementById('reset-password').onclick = function(e) {
			e.preventDefault();
			vxpay.resetPassword().then(function() {
				console.log('Opened password reset')
			});
		};

		/** Password lost */
		document.getElementById('lost-password').onclick = function(e) {
			e.preventDefault();
			vxpay.lostPassword().then(function() {
				console.log('Opened password lost')
			});
		};

		document.getElementById('open-voice-call').onclick = function(e) {
			e.preventDefault();
			vxpay.openVoiceCall().then(function() {
				console.log('Open voice call')
			});
		};

		document.getElementById('open-payment').onclick = function(e) {
			e.preventDefault();
			vxpay.openPayment().then(function() {
				console.log('Open payment')
			});
		};

		document.getElementById('open-limited').onclick = function(e) {
			e.preventDefault();
			vxpay.limitPayment().then(function() {
				console.log('Open payment (limited)')
			});
		};

		document.getElementById('open-limited').onclick = function(e) {
			e.preventDefault();
			vxpay.limitPayment().then(function() {
				console.log('Open payment (limited)');
			});
		};

		document.getElementById('open-abo').onclick = function(e) {
			e.preventDefault();
			vxpay.openAbo().then(function() {
				console.log('Open abo');
			});
		};

		document.getElementById('open-abo-trial').onclick = function(e) {
			e.preventDefault();
			vxpay.vipAboTrial().then(function() {
				console.log('Open abo (trial)');
			});
		};

		document.getElementById('open-abo-premium').onclick = function(e) {
			e.preventDefault();
			vxpay.premiumAbo().then(function() {
				console.log('Open abo (premium)');
			});
		};

		document.getElementById('open-settings').onclick = function(e) {
			e.preventDefault();
			vxpay.openSettings().then(function() {
				console.log('Open settings');
			});
		};

		document.getElementById('open-settings').onclick = function(e) {
			e.preventDefault();
			vxpay.openSettings().then(function() {
				console.log('Open settings');
			});
		};

		document.getElementById('open-avs').onclick = function(e) {
			e.preventDefault();
			vxpay.openAVS().then(function() {
				console.log('Open age verification');
			});
		};

		document.getElementById('open-avs').onclick = function(e) {
			e.preventDefault();
			vxpay.openAVS().then(function() {
				console.log('Open age verification');
			});
		};

		document.getElementById('open-promo-code').onclick = function(e) {
			e.preventDefault();
			vxpay.openPromoCode().then(function() {
				console.log('Open promo code');
			});
		};

		document.getElementById('open-scratch-card').onclick = function(e) {
			e.preventDefault();
			vxpay.openScratchCard().then(function() {
				console.log('Open scratch card');
			});
		};

		document.getElementById('open-one-click').onclick = function(e) {
			e.preventDefault();
			vxpay.openOneClick().then(function() {
				console.log('Open one click');
			});
		};

		document.getElementById('open-auto-recharge').onclick = function(e) {
			e.preventDefault();
			vxpay.openAutoReCharge().then(function() {
				console.log('Open one auto re-charge');
			});
		};

		document.getElementById('open-balance').onclick = function(e) {
			e.preventDefault();
			vxpay.openBalance().then(function() {
				console.log('Open `open balance`');
			});
		}
	});

	isLoggedInAction = function() {
		vxpay.isLoggedIn()
			.then(function(msg) {
				confirm('Logged in: ' + (msg.loggedIn === true ? 'YES' : 'NO'))
			})
	};

	getAvsStatus = function() {
		vxpay.getAVSStatus()
			.then(function(msg) {
				confirm('AVS status: ' + (msg.status.fsk18 === true ? 'FSK18' : '<unknown>'))
			})
	};

	getBalance = function() {
		vxpay.getBalance()
			.then(function(msg) {
				confirm('Current balance: ' + msg.balance.toString())
			});
	};

	getAbos = function() {
		vxpay.getActiveAbos()
			.then(function(msg) {
				var abos = '';

				msg.abos.forEach(function(abo) {
					abos += abo.name + ' (' + abo.amount + '), ';
				});

				confirm('Active abos: ' + abos)
			});
	};

	logout = function() {
		vxpay.logout().then(function(msg) {
			alert('User logged out');
		});
	};
</script>
<script type="text/javascript" src="vxpay.min.js" onload="__init()" async></script>
<script type="text/javascript" src="mdc/mdc.min.js" async></script>
</body>
</html>