<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width">
	<title>VXPay - sample integration</title>
	<link rel="stylesheet" href="mdc/mdc.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body class="mdc-typography">
<div class="mdc-layout-grid">
	<div class="mdc-layout-grid__inner">
		<div class="mdc-layout-grid__cell--span-12">
			<h4 class="mdc-typography--title">Configuration</h4>
			<div class="mdc-layout-grid__inner">
				<div class="mdc-form-field mdc-layout-grid__cell--span-3">
					<div class="mdc-checkbox">
						<input type="checkbox" name="use-tab" id="use-tab" class="mdc-checkbox__native-control" onchange="onToggleTab(document.getElementById('use-tab').checked)" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="use-tab">Open in a new tab</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<label for="language">Language:</label>
					<select name="language" id="language">
						<option value="EN">EN</option>
						<option value="DE">DE</option>
						<option value="NL">NL</option>
					</select>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-3">
					<label for="env">VXPayEnvironment.</label>
					<select name="env" id="env">
						<option value="vxone">VXONE</option>
						<option value="vxonelp">VXONE_LP</option>
						<option value="slp">SLP</option>
						<option value="tvchat">TV_CHAT</option>
						<option value="cultbabes">CULT_BABES</option>
						<option value="lp">LANDING_PAGE</option>
					</select>
				</div>
				<div class="mdc-layout-grid__cell--span-3">
					<label class="mdc-floating-label" for="pfm">PFM:</label>
					<input type="number" id="pfm" value="" />
				</div>
				<div class="mdc-layout-grid__cell--span-4">
					<label class="mdc-floating-label" for="abg-url">ABG URL:</label>
					<input type="url" id="abg-url" value="https://www.visit-x.net/CAMS/EN/Info/Zentrum.html?submod=AGB&track=Account" />
				</div>
				<div class="mdc-layout-grid__cell--span-4">
					<label class="mdc-floating-label" for="privacy-url">Privacy URL:</label>
					<input type="url" id="privacy-url" value="https://www.visit-x.net/CAMS/EN/Info/Zentrum.html?submod=Datenschutz&track=Index" />
				</div>
				<div class="mdc-layout-grid__cell--span-3">
					<label class="mdc-floating-label" for="host">Host:</label>
					<input type="number" id="host" value="" />
				</div>
				<div class="mdc-layout-grid__cell--span-3">
					<label class="mdc-floating-label" for="wmid" title="Webmaster ID">WMID:</label>
					<input type="number" id="wmid" value="" />
				</div>
				<div class="mdc-layout-grid__cell--span-3">
					<label class="mdc-floating-label" for="token">Token:</label>
					<input type="text" id="token" value="" />
				</div>
				<div class="mdc-layout-grid__cell--span-4">
					<label class="mdc-floating-label" for="promoCode">Promo code:</label>
					<input type="text" id="promoCode" value="" />
				</div>
				<div class="mdc-layout-grid__cell--span-4">
					<label class="mdc-floating-label" for="wmSubRef">WM sub ref:</label>
					<input type="text" id="wmSubRef" value="" />
				</div>
				<div class="mdc-layout-grid__cell--span-4">
					<label class="mdc-floating-label" for="wmToken">WM token:</label>
					<input type="text" id="wmToken" value="" />
				</div>
				<div class="mdc-layout-grid__cell--span-4">
					<label class="mdc-floating-label" for="adtv">ADTV:</label>
					<input type="text" id="adtv" value="" />
				</div>
				<div class="mdc-layout-grid__cell--span-4">
					<label class="mdc-floating-label" for="ruri">ruri:</label>
					<input type="url" id="ruri" value="" />
				</div>
			</div>
		</div>
		<div class="mdc-layout-grid__cell--span-12">
			<h4 class="mdc-typography--title">Modal Configuration</h4>
			<div class="mdc-layout-grid__inner">
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-login" id="modal-login" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-login">Show login</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-showHeader" id="modal-showHeader" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-showHeader">Show header</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-showTeaser" id="modal-showTeaser" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-showTeaser">Show teaser</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-showFooter" id="modal-showFooter" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-showFooter">Show footer</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-support" id="modal-support" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-support">Show support</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-showOAuth" id="modal-showOAuth" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-showOAuth">Show OAuth</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-showNL" id="modal-showNL" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-showNL">Show NL</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-neutralHeader" id="modal-neutralHeader" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-neutralHeader">Neutral header</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-teaserBonus" id="modal-teaserBonus" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-teaserBonus">Teaser bonus</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-showThank" id="modal-showThank" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-showThank">Show thank</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-showLogo" id="modal-showLogo" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-showLogo">Show logo</label>
				</div>
				<div class="mdc-form-field mdc-layout-grid__cell--span-2">
					<div class="mdc-checkbox">
						<input type="checkbox" name="modal-showTeaserBar" id="modal-showTeaserBar" class="mdc-checkbox__native-control" />
						<div class="mdc-checkbox__background">
							<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
								<path class="mdc-checkbox__checkmark-path"
								      fill="none"
								      stroke="white"
								      d="M1.73,12.91 8.1,19.28 22.79,4.59">
								</path>
							</svg>
							<div class="mdc-checkbox__mixedmark"></div>
						</div>
					</div>
					<label for="modal-showTeaserBar">Show teaser bar</label>
				</div>
			</div>
		</div>
		<div class="mdc-layout-grid__cell--span-12">
			<h4 class="mdc-typography--title">Open</h4>
			<div class="mdc-layout-grid__inner">
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-login">Login</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-signup">Register</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-login-or-signup">Login or Register</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="reset-password">Reset password</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-2-phone  mdc-layout-grid__cell--span-4-tablet"
				   href="#"
				   id="lost-password">Lost password</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-voice-call">Voice call</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-2-phone mdc-layout-grid__cell--span-4-tablet"
				   href="#"
				   id="open-payment">General Payment</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-abo">VIP abo</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-limited">Limited payment</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-abo-trial">VIP trial abo</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-abo-premium">Premium abo</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#" title="Age verification"
				   id="open-avs">AVS</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-settings">Extended settings</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-promo-code">Promo code</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-scratch-card">Scratch card</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-one-click">One click</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-auto-recharge">Auto recharge</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone"
				   href="#"
				   id="open-balance">Open balance</a>
			</div>
		</div>
		<div class="mdc-layout-grid__cell--span-12">
			<h4 class="mdc-typography--title">Actions</h4>
			<div class="mdc-layout-grid__inner">
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone" href="javascript:isLoggedInAction()">Is logged in?</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone" href="javascript:logout()">Logout</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone" href="javascript:getAvsStatus()">AVS status</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone" href="javascript:getBalance()">Get balance</a>
				<a class="mdc-button mdc-button--raised mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone" href="javascript:getAbos()">Get active abos</a>
			</div>
		</div>
	</div>
</div>

<!-- Load the library -->
<script type="text/javascript">
	var vxpay, config;

	/**
	 * Re-init as tab
	 * @param {Boolean} enable
	 */
	onToggleTab = function(enable) {
		config           = new VX.VXPayConfig(window);
		config.enableTab = enable;
		config.logging   = true;
		config.language  = VX.VXPayLanguage.EN;
		vxpay            = new VX.VXPay(config);
	};

	__init = function() {
		config          = new VX.VXPayConfig(window);
		config.logging  = false;
		config.language = VX.VXPayLanguage.EN;
		vxpay           = new VX.VXPay(config);

		if (vxpay.config.enableTab) {
			document.getElementById('use-tab').setAttribute('checked', 'checked');
			document.getElementById('use-tab').setAttribute('disabled', 'disabled');
			document.querySelector('label[for="use-tab"]').textContent = 'Always open in new tab on mobile'
		}
	};

	document.addEventListener('DOMContentLoaded', function() {
		/** Open login click handler */
		document.getElementById('open-login').onclick = function(e) {
			e.preventDefault();
			vxpay.openLogin().then(function() {
				console.log('Login opened')
			});
		};

		/** Open registration */
		document.getElementById('open-signup').onclick = function(e) {
			e.preventDefault();
			vxpay.openSignUp().then(function() {
				console.log('SignUp opened')
			});
		};

		/** Open registration or login */
		document.getElementById('open-login-or-signup').onclick = function(e) {
			e.preventDefault();
			vxpay.openSignUpOrLogin().then(function() {
				console.log('Opened')
			});
		};

		/** Password reset */
		document.getElementById('reset-password').onclick = function(e) {
			e.preventDefault();
			vxpay.resetPassword().then(function() {
				console.log('Opened password reset')
			});
		};

		/** Password lost */
		document.getElementById('lost-password').onclick = function(e) {
			e.preventDefault();
			vxpay.lostPassword().then(function() {
				console.log('Opened password lost')
			});
		};

		document.getElementById('open-voice-call').onclick = function(e) {
			e.preventDefault();
			vxpay.openVoiceCall().then(function() {
				console.log('Open voice call')
			});
		};

		document.getElementById('open-payment').onclick = function(e) {
			e.preventDefault();
			vxpay.openPayment().then(function() {
				console.log('Open payment')
			});
		};

		document.getElementById('open-limited').onclick = function(e) {
			e.preventDefault();
			vxpay.limitPayment().then(function() {
				console.log('Open payment (limited)')
			});
		};

		document.getElementById('open-limited').onclick = function(e) {
			e.preventDefault();
			vxpay.limitPayment().then(function() {
				console.log('Open payment (limited)');
			});
		};

		document.getElementById('open-abo').onclick = function(e) {
			e.preventDefault();
			vxpay.openAbo().then(function() {
				console.log('Open abo');
			});
		};

		document.getElementById('open-abo-trial').onclick = function(e) {
			e.preventDefault();
			vxpay.vipAboTrial().then(function() {
				console.log('Open abo (trial)');
			});
		};

		document.getElementById('open-abo-premium').onclick = function(e) {
			e.preventDefault();
			vxpay.premiumAbo().then(function() {
				console.log('Open abo (premium)');
			});
		};

		document.getElementById('open-settings').onclick = function(e) {
			e.preventDefault();
			vxpay.openSettings().then(function() {
				console.log('Open settings');
			});
		};

		document.getElementById('open-settings').onclick = function(e) {
			e.preventDefault();
			vxpay.openSettings().then(function() {
				console.log('Open settings');
			});
		};

		document.getElementById('open-avs').onclick = function(e) {
			e.preventDefault();
			vxpay.openAVS().then(function() {
				console.log('Open age verification');
			});
		};

		document.getElementById('open-avs').onclick = function(e) {
			e.preventDefault();
			vxpay.openAVS().then(function() {
				console.log('Open age verification');
			});
		};

		document.getElementById('open-promo-code').onclick = function(e) {
			e.preventDefault();
			vxpay.openPromoCode().then(function() {
				console.log('Open promo code');
			});
		};

		document.getElementById('open-scratch-card').onclick = function(e) {
			e.preventDefault();
			vxpay.openScratchCard().then(function() {
				console.log('Open scratch card');
			});
		};

		document.getElementById('open-one-click').onclick = function(e) {
			e.preventDefault();
			vxpay.openOneClick().then(function() {
				console.log('Open one click');
			});
		};

		document.getElementById('open-auto-recharge').onclick = function(e) {
			e.preventDefault();
			vxpay.openAutoReCharge().then(function() {
				console.log('Open one auto re-charge');
			});
		};

		document.getElementById('open-balance').onclick = function(e) {
			e.preventDefault();
			vxpay.openBalance().then(function() {
				console.log('Open `open balance`');
			});
		}
	});

	isLoggedInAction = function() {
		vxpay.isLoggedIn()
			.then(function(msg) {
				confirm('Logged in: ' + (msg.loggedIn === true ? 'YES' : 'NO'))
			})
	};

	getAvsStatus = function() {
		vxpay.getAVSStatus()
			.then(function(msg) {
				confirm('AVS status: ' + (msg.status.fsk18 === true ? 'FSK18' : '<unknown>'))
			})
	};

	getBalance = function() {
		vxpay.getBalance()
			.then(function(msg) {
				confirm('Current balance: ' + msg.balance.toString())
			});
	};

	getAbos = function() {
		vxpay.getActiveAbos()
			.then(function(msg) {
				var abos = '';

				msg.abos.forEach(function(abo) {
					abos += abo.name + ' (' + abo.amount + '), ';
				});

				confirm('Active abos: ' + abos)
			});
	};

	logout = function() {
		vxpay.logout().then(function(msg) {
			alert('User logged out');
		});
	};
</script>
<script type="text/javascript" src="vxpay.min.js" onload="__init()" async></script>
<script type="text/javascript" src="mdc/mdc.min.js"></script>
</body>
</html>